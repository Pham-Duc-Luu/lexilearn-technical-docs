---
title: C√†i ƒë·∫∑t v√† kh·ªüi ch·∫°y
sidebar_position: 2
---

# ‚öôÔ∏è C√†i ƒë·∫∑t v√† Kh·ªüi ch·∫°y Lexilearn Backend

H∆∞·ªõng d·∫´n d∆∞·ªõi ƒë√¢y s·∫Ω gi√∫p b·∫°n c√†i ƒë·∫∑t v√† kh·ªüi ƒë·ªông ·ª©ng d·ª•ng **Lexilearn Backend** tr√™n m√°y t√≠nh c·ªßa m√¨nh.

## üì¶ Y√™u c·∫ßu h·ªá th·ªëng

Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu, h√£y ƒë·∫£m b·∫£o r·∫±ng b·∫°n ƒë√£ c√†i:

- [Java 21](https://jdk.java.net/21/)
- [Maven 3.8+](https://maven.apache.org/download.cgi)
- [Docker](https://www.docker.com/) (n·∫øu s·ª≠ d·ª•ng database container)
- IDE nh∆∞ [IntelliJ IDEA](https://www.jetbrains.com/idea/) ho·∫∑c [VSCode](https://code.visualstudio.com/)

## üìÅ Clone d·ª± √°n

```bash
git clone https://github.com/Pham-Duc-Luu/Lexilearn-backend-service-spring-boot.git
cd Lexilearn-backend-service-spring-boot
```

## üõ†Ô∏è C√†i ƒë·∫∑t & C·∫•u h√¨nh MySQL

### ‚úÖ 1. T·∫°o Database

```sql
CREATE DATABASE lexilearn_backend_database;
USE lexilearn_backend_database;
```

### üë§ 2. B·∫£ng User

```sql
CREATE TABLE User (
  user_id INT PRIMARY KEY AUTO_INCREMENT,
  user_name VARCHAR(255) NOT NULL,
  user_uuid CHAR(16) NOT NULL UNIQUE DEFAULT (UUID()),
  user_email VARCHAR(255) NOT NULL UNIQUE,
  user_password VARCHAR(255) NOT NULL,
  user_avatar TEXT,
  user_thumbnail TEXT,
  user_provider ENUM('GOOGLE', 'FACEBOOK', 'LOCAL'),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### üßë‚Äçüé® 3. B·∫£ng UserAvatar

```sql
CREATE TABLE UserAvatar (
  user_avatar_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL UNIQUE,
  sex ENUM('man', 'woman') NOT NULL DEFAULT 'man',
  face_color VARCHAR(7) NOT NULL DEFAULT '#ffffff',
  ear_size ENUM('small', 'big') NOT NULL DEFAULT 'small',
  hair_color VARCHAR(7) NOT NULL DEFAULT '#ffffff',
  hair_style ENUM('normal', 'thick', 'mohawk', 'womanLong', 'womanShort') NOT NULL DEFAULT 'normal',
  hat_color VARCHAR(7) NOT NULL DEFAULT '#ffffff',
  hat_style ENUM('beanie', 'turban', 'none') NOT NULL DEFAULT 'none',
  eye_brow ENUM('up', 'upWoman') NOT NULL DEFAULT 'up',
  eye_style ENUM('circle', 'oval', 'smile') NOT NULL DEFAULT 'circle',
  glasses_style ENUM('round', 'square', 'none') NOT NULL DEFAULT 'none',
  nose_style ENUM('short', 'long', 'round') NOT NULL DEFAULT 'short',
  mouth_style ENUM('laugh', 'smile', 'peace') NOT NULL DEFAULT 'smile',
  shirt_style ENUM('hoody', 'short', 'polo') NOT NULL DEFAULT 'short',
  shirt_color VARCHAR(7) NOT NULL DEFAULT '#ffffff',
  bg_color VARCHAR(7) NOT NULL DEFAULT '#ffffff',
  gradient_bg_color TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  user_avatar_url TEXT,
  FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE
);

```

### üîê 4. B·∫£ng User_Token

```sql
CREATE TABLE User_Token (
  UT_id INT PRIMARY KEY AUTO_INCREMENT,
  UT_type ENUM('REFRESH_TOKEN', 'OTP'),
  UT_expired_at TIMESTAMP,
  UT_text TEXT,
  UT_user_id INT,
  FOREIGN KEY (UT_user_id) REFERENCES User(user_id) ON DELETE CASCADE
);
```

### üóÇÔ∏è 5. B·∫£ng Desk

```sql
CREATE TABLE Desk (
  desk_id INT PRIMARY KEY AUTO_INCREMENT,
  desk_description TEXT,
  desk_thumbnail TEXT,
  desk_icon TEXT,
  desk_status ENUM('PUBLISHED', 'DRAFTED', 'BIN'),
  desk_name VARCHAR(255),
  desk_is_public BOOLEAN,
  desk_owner_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (desk_owner_id) REFERENCES User(user_id) ON DELETE CASCADE
);

```

### üìö 6. B·∫£ng Vocab v√† Vocab_Example

```sql
CREATE TABLE Vocab (
  vocab_id INT PRIMARY KEY AUTO_INCREMENT,
  vocab_language VARCHAR(255),
  vocab_meaning VARCHAR(255),
  vocab_image TEXT,
  vocab_text VARCHAR(255),
  vocab_desk_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY(vocab_desk_id) REFERENCES Desk(desk_id) ON DELETE CASCADE
);

CREATE TABLE Vocab_Example (
  VE_id INT PRIMARY KEY AUTO_INCREMENT,
  VE_text TEXT,
  VE_vocab_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (VE_vocab_id) REFERENCES Vocab(vocab_id) ON DELETE CASCADE
);

CREATE INDEX idx_user_email ON User(user_email);

```

### üÉè 7. B·∫£ng Flashcard

```sql
CREATE TABLE Flashcard (
  flashcard_id INT PRIMARY KEY AUTO_INCREMENT,
  flashcard_front_image TEXT,
  flashcard_front_sound TEXT,
  flashcard_front_text TEXT,
  flashcard_back_image TEXT,
  flashcard_back_sound TEXT,
  flashcard_back_text TEXT,
  flashcard_vocab_id INT NULL,
  flashcard_desk_id INT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  flashcard_desk_position INT NOT NULL DEFAULT 1,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (flashcard_vocab_id) REFERENCES Vocab(vocab_id) ON DELETE CASCADE,
  FOREIGN KEY (flashcard_desk_id) REFERENCES Desk(desk_id) ON DELETE CASCADE
);

ALTER TABLE Flashcard ADD CONSTRAINT unique_flashcard_position UNIQUE (flashcard_desk_id, flashcard_desk_position);

```

‚è≥ 8. B·∫£ng Spaced_Repetition

```sql
CREATE TABLE Spaced_Repetition (
  spaced_repetition_id INT PRIMARY KEY AUTO_INCREMENT,
  spaced_repetition_name ENUM('SM-2'),
  spaced_repetition_count INT,
  spaced_repetition_easiness_factor FLOAT,
  spaced_repetition_interval FLOAT,
  spaced_repetition_next_day DATE,
  spaced_repetition_flashcard_id INT UNIQUE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (spaced_repetition_flashcard_id) REFERENCES Flashcard(flashcard_id) ON DELETE CASCADE
);

```

import DataVisualizer from '@site/src/components/docs/database-visualizer/index.tsx';

<DataVisualizer />;

## ‚öôÔ∏è C·∫•u h√¨nh m√¥i tr∆∞·ªùng

Tr∆∞·ªõc khi c√≥ th·ªÉ c√†i ƒë·∫∑t ƒë∆∞·ª£c d·ª± √°n, c·∫ßn c·∫•u h√¨nh bi·∫øn m√¥i tr∆∞·ªùng cho ·ª©ng d·ª•ng.

### t·∫°o m·ªôt file .env.local ·ªü th∆∞ m·ª•c root

```bash
touch .env.local
```

nh·ªØng th√¥ng tin ti·∫øp theo l√† c·ª±c k√¨ nh·∫°y c·∫£m, li√™n l·∫°c v·ªõi leader ƒë·ªÉ c√≥ nh·ªØng bi·∫øn m√¥i tr∆∞·ªùng

```bash
PORT=
API_KEY=
...
```

```bash
export $(cat local.env | xargs)
```

## C√†i ƒë·∫∑t ·ª©ng d·ª•ng

di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c root, v√† c√†i ƒë·∫∑t

```bash
mvn clean install
```

L·ªánh n√†y s·∫Ω:

- **Xo√° th∆∞ m·ª•c `target`** (n·∫øu c√≥) ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng m·ªçi t·ªáp c≈© ƒë∆∞·ª£c l√†m s·∫°ch.
- **T·∫£i v·ªÅ c√°c ph·ª• thu·ªôc** ƒë∆∞·ª£c khai b√°o trong file `pom.xml`.
- **Build v√† ƒë√≥ng g√≥i ·ª©ng d·ª•ng** th√†nh file `.jar`.

:::warning[C·∫•u h√¨nh v√† s·ª≠ d·ª•ng jOOQ v·ªõi MySQL]

nh∆∞ c√°c b·∫°n c√≥ th·ªÉ th·∫•y, **jooq** s·∫Ω c·∫ßn truy c·∫≠p ƒë·∫øn **mysql database** ƒë·ªÉ l·∫•y c√°c schema v√† t·ª± ƒë·ªông t·∫°o c√°c ORM class, v·∫≠y n√™n c√°c b·∫°n c·∫ßn setup database tr∆∞·ªõc khi c√≥ th·ªÉ c√†i ƒë·∫∑t d·ª± √°n
:::

## C√°c b∆∞·ªõc ch·∫°y ·ª©ng d·ª•ng

Sau khi c√†i ƒë·∫∑t xong c√°c ph·ª• thu·ªôc v√† c·∫•u h√¨nh c∆° s·ªü d·ªØ li·ªáu, b·∫°n c√≥ th·ªÉ ch·∫°y ·ª©ng d·ª•ng b·∫±ng l·ªánh sau:

```bash
mvn spring-boot:run
```

L·ªánh n√†y s·∫Ω kh·ªüi ƒë·ªông ·ª©ng d·ª•ng Spring Boot v√† b·∫°n c√≥ th·ªÉ truy c·∫≠p v√†o ·ª©ng d·ª•ng qua `http://localhost:8080` (ho·∫∑c c·ªïng m√† b·∫°n ƒë√£ c·∫•u h√¨nh).

## C√°c b∆∞·ªõc ti·∫øp theo

- **T√πy ch·ªânh c·∫•u h√¨nh**: B·∫°n c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh c√°c file c·∫•u h√¨nh nh∆∞ `application.properties` ho·∫∑c `application.yml` ƒë·ªÉ ph√π h·ª£p v·ªõi m√¥i tr∆∞·ªùng s·∫£n xu·∫•t.
- **Tri·ªÉn khai l√™n m√¥i tr∆∞·ªùng s·∫£n xu·∫•t**: Sau khi ·ª©ng d·ª•ng ch·∫°y ·ªïn ƒë·ªãnh, b·∫°n c√≥ th·ªÉ tri·ªÉn khai l√™n c√°c m√¥i tr∆∞·ªùng nh∆∞ AWS, Google Cloud, ho·∫∑c m√°y ch·ªß c·ªßa b·∫°n.
