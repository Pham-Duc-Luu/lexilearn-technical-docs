---
sidebar_position: 1
title: Search image
tags:
    - developing
    - workflow
---

viáº¿t docs trong file .mdx

# Káº¿t há»£p searching tá»« nhiá»u Third-party api (Developing)

Trong quÃ¡n trÃ¬nh phÃ¡ triá»ƒn, viá»‡c phÃ¡t triá»ƒn search image engine lÃ  cáº§n thiáº¿t nhung láº¡i vÃ´ cÃ¹ng khÃ³ khÄƒn,
váº­y nÃªn chÃºng ta sáº½ sá»­ dá»¥ng cÃ¡c third-party api cho viá»‡c search vÃ  lÆ°u results Ä‘á»ƒ nÃ¢ng cáº¥p search engine cá»§a há»‡ thá»‘ng

---


# CÃ¡c third-party API Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng

## 1. Google Custom Search JSON API

[ğŸ”— Xem overview](https://developers.google.com/custom-search/v1/overview?hl=vi)

Google Custom Search lÃ  dá»‹ch vá»¥ tÃ¬m kiáº¿m tÃ¹y chá»‰nh máº¡nh máº½ do Google cung cáº¥p, cho phÃ©p truy váº¥n káº¿t quáº£ tÃ¬m kiáº¿m web hoáº·c hÃ¬nh áº£nh thÃ´ng qua REST API.

### ğŸ“ Endpoint REST API

```
https://www.googleapis.com/customsearch/v1?[parameters]
```

### ğŸ”‘ Tham sá»‘ báº¯t buá»™c

Má»—i request tÃ¬m kiáº¿m cáº§n cÃ³ **3 tham sá»‘ chÃ­nh**:

| Tham sá»‘ | Ã nghÄ©a |
|--------|--------|
| `key` | API Key Ä‘á»‹nh danh á»©ng dá»¥ng cá»§a báº¡n |
| `cx`  | MÃ£ cá»§a Custom Search Engine (Ä‘Æ°á»£c táº¡o tá»« Google Console) |
| `q`   | Cá»¥m tá»« tÃ¬m kiáº¿m (search query) |

VÃ­ dá»¥ `cx`: `8ac1ab64606d234f1`

### ğŸ“¤ VÃ­ dá»¥ request

```bash
GET https://www.googleapis.com/customsearch/v1?key=YOUR_API_KEY&cx=YOUR_CX_ID&q=cat+images
```

---

### ğŸ“¥ Pháº£n há»“i (Response)

Náº¿u thÃ nh cÃ´ng, API sáº½ tráº£ vá» mÃ£ tráº¡ng thÃ¡i:

```
HTTP 200 OK
```

KÃ¨m theo ná»™i dung dá»¯ liá»‡u á»Ÿ Ä‘á»‹nh dáº¡ng **JSON**.

Dá»¯ liá»‡u pháº£n há»“i bao gá»“m 3 nhÃ³m chÃ­nh:

1. **Metadata tÃ¬m kiáº¿m** â€“ mÃ´ táº£ thÃ´ng tin vá» truy váº¥n vÃ  káº¿t quáº£
2. **Metadata engine** â€“ mÃ´ táº£ cÃ´ng cá»¥ tÃ¬m kiáº¿m Ä‘Æ°á»£c dÃ¹ng
3. **Danh sÃ¡ch káº¿t quáº£** â€“ máº£ng cÃ¡c káº¿t quáº£ phÃ¹ há»£p vá»›i truy váº¥n

---

### ğŸ“¦ Cáº¥u trÃºc response máº«u (image search)

DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ rÃºt gá»n cá»§a má»™t response JSON khi tÃ¬m kiáº¿m áº£nh vá»›i tá»« khÃ³a `"çŒ«"`:

```javascript
const requestOptions = {
  method: "GET",
  redirect: "follow"
};

fetch("https://www.googleapis.com/customsearch/v1?key={{API_KEY}}&cx=64dac4582c74b4a77&q=çŒ«&searchType=image", requestOptions)
  .then((response) => response.text())
  .then((result) => console.log(result))
  .catch((error) => console.error(error));
```

```json
{
  "kind": "customsearch#search",
  "queries": {
    "request": [
      {
        "searchTerms": "çŒ«",
        "count": 10,
        "startIndex": 1,
        "cx": "YOUR_CX_ID",
        "searchType": "image"
      }
    ]
  },
  "searchInformation": {
    "searchTime": 0.35,
    "totalResults": "13140000000"
  },
  "items": [
    {
      "title": "çŒ« - Wikipedia",
      "link": "https://upload.wikimedia.org/wikipedia/commons/7/74/Cat_August_2010-3.jpg",
      "displayLink": "zh.wikipedia.org",
      "snippet": "çŒ«- ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦",
      "mime": "image/jpeg",
      "image": {
        "contextLink": "https://zh.wikipedia.org/wiki/çŒ«",
        "height": 1690,
        "width": 2776,
        "byteSize": 3119885,
        "thumbnailLink": "https://encrypted-tbn0.gstatic.com/images?q=...&s",
        "thumbnailHeight": 91,
        "thumbnailWidth": 150
      }
    }

  ]
}
```

### ğŸ“š TÃ i liá»‡u chi tiáº¿t

Äá»ƒ hiá»ƒu rÃµ hÆ¡n vá» cáº¥u trÃºc pháº£n há»“i, tham kháº£o tÃ i liá»‡u chÃ­nh thá»©c táº¡i:
ğŸ‘‰ [Google Custom Search API Reference](https://developers.google.com/custom-search/v1/reference/rest)



### âœ… LÆ°u Ã½ khi dÃ¹ng

- Custom Search JSON API provides 100 search queries per day for free. If you need more, you may sign up for billing in the API Console. Additional requests cost $5 per 1000 queries, up to 10k queries per day.

---


## 2. ğŸ“¸ Sá»­ dá»¥ng Unsplash API Ä‘á»ƒ tÃ¬m kiáº¿m hÃ¬nh áº£nh (Developing)

NgoÃ i Google Custom Search, má»™t lá»±a chá»n nháº¹ hÆ¡n vÃ  chuyÃªn biá»‡t cho áº£nh lÃ  **[Unsplash API](https://unsplash.com/documentation)** â€“ cung cáº¥p kho áº£nh cháº¥t lÆ°á»£ng cao miá»…n phÃ­ vá»›i cÃ´ng cá»¥ tÃ¬m kiáº¿m máº¡nh máº½.

---

### ğŸš€ Endpoint chÃ­nh

```http
GET https://api.unsplash.com/search/photos
```

---

### ğŸ§¾ CÃ¡c query parameters phá»• biáº¿n

| Tham sá»‘ | Ã nghÄ©a |
|---------|--------|
| `query` | Tá»« khÃ³a tÃ¬m kiáº¿m |
| `page` | Trang sá»‘ (báº¯t Ä‘áº§u tá»« 1) |
| `per_page` | Sá»‘ lÆ°á»£ng áº£nh má»—i trang (máº·c Ä‘á»‹nh: 10, tá»‘i Ä‘a: 30) |
| `orientation` | HÆ°á»›ng áº£nh (`landscape`, `portrait`, `squarish`) |
| `client_id` | Access key cá»§a á»©ng dá»¥ng (báº¯t buá»™c) |

---

### ğŸ“¥ VÃ­ dá»¥ curl

```bash
curl "https://api.unsplash.com/search/photos/?client_id={{UPSPLASH_ACCESS_KEY}}&query=çŒ«"
```

---

### ğŸ“¦ Response máº«u (rÃºt gá»n)

```json
{
    "total": 321,
    "total_pages": 33,
    "results": [
        {
            "id": "Zi-GhrfKblE",
            "slug": "brown-lion-lying-on-rock-Zi-GhrfKblE",
            "alternative_slugs": {
                "en": "brown-lion-lying-on-rock-Zi-GhrfKblE",
                "es": "leon-marron-acostado-en-la-roca-Zi-GhrfKblE",
                "ja": "å²©ã®ä¸Šã«æ¨ªãŸã‚ã‚‹èŒ¶è‰²ã®ãƒ©ã‚¤ã‚ªãƒ³-Zi-GhrfKblE",
                "fr": "lion-brun-couche-sur-un-rocher-Zi-GhrfKblE",
                "it": "leone-marrone-sdraiato-sulla-roccia-Zi-GhrfKblE",
                "ko": "ë°”ìœ„ì—-ëˆ„ì›Œ-ê°ˆìƒ‰-ì‚¬ì-Zi-GhrfKblE",
                "de": "brauner-lowe-liegt-auf-felsen-Zi-GhrfKblE",
                "pt": "leao-marrom-deitado-na-rocha-Zi-GhrfKblE"
            },
            "created_at": "2021-02-14T09:19:52Z",
            "updated_at": "2025-05-10T01:19:27Z",
            "promoted_at": null,
            "width": 9504,
            "height": 6336,
            "color": "#737359",
            "blur_hash": "LHF~21-o~WE2^+Io%LE2ElE2%1oy",
            "description": "çŒ«",
            "alt_description": "brown lion lying on rock",
            "breadcrumbs": [],
            "urls": {
                "raw": "https://images.unsplash.com/photo-1613294314082-2f3513c8e1be?ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA&ixlib=rb-4.1.0",
                "full": "https://images.unsplash.com/photo-1613294314082-2f3513c8e1be?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA&ixlib=rb-4.1.0&q=85",
                "regular": "https://images.unsplash.com/photo-1613294314082-2f3513c8e1be?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA&ixlib=rb-4.1.0&q=80&w=1080",
                "small": "https://images.unsplash.com/photo-1613294314082-2f3513c8e1be?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA&ixlib=rb-4.1.0&q=80&w=400",
                "thumb": "https://images.unsplash.com/photo-1613294314082-2f3513c8e1be?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA&ixlib=rb-4.1.0&q=80&w=200",
                "small_s3": "https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1613294314082-2f3513c8e1be"
            },
            "links": {
                "self": "https://api.unsplash.com/photos/brown-lion-lying-on-rock-Zi-GhrfKblE",
                "html": "https://unsplash.com/photos/brown-lion-lying-on-rock-Zi-GhrfKblE",
                "download": "https://unsplash.com/photos/Zi-GhrfKblE/download?ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA",
                "download_location": "https://api.unsplash.com/photos/Zi-GhrfKblE/download?ixid=M3w3MDk2ODd8MHwxfHNlYXJjaHwxfHwlRTclOEMlQUJ8ZW58MHx8fHwxNzQ2ODUwNDkxfDA"
            },
            "likes": 12,
            "liked_by_user": false,
            "current_user_collections": [],
            "sponsorship": null,
            "topic_submissions": {},
            "asset_type": "photo",
            "user": {
                "id": "PSRxw8jFgWo",
                "updated_at": "2025-03-02T21:35:01Z",
                "username": "zhangkaiyv",
                "name": "zhang kaiyv",
                "first_name": "zhang",
                "last_name": "kaiyv",
                "twitter_username": "zhangkaiyv",
                "portfolio_url": null,
                "bio": "å¾®ä¿¡zhangkaiyv1993ï¼ŒæŠ–éŸ³2241103390ï¼ˆä¼šå‘å¸ƒçŸ­è§†é¢‘ï¼Œå¸Œæœ›å¤šå¤šæ”¯æŒç‚¹èµå…³æ³¨ï¼‰\r\nå›¾ç‰‡å¦‚æœå•†ç”¨è¯·è”ç³»æˆ‘ï¼ï¼ï¼",
                "location": "beijing",
                "links": {
                    "self": "https://api.unsplash.com/users/zhangkaiyv",
                    "html": "https://unsplash.com/@zhangkaiyv",
                    "photos": "https://api.unsplash.com/users/zhangkaiyv/photos",
                    "likes": "https://api.unsplash.com/users/zhangkaiyv/likes",
                    "portfolio": "https://api.unsplash.com/users/zhangkaiyv/portfolio",
                    "following": "https://api.unsplash.com/users/zhangkaiyv/following",
                    "followers": "https://api.unsplash.com/users/zhangkaiyv/followers"
                },
                "profile_image": {
                    "small": "https://images.unsplash.com/profile-1680323081749-eb38590d71f0?ixlib=rb-4.0.3&crop=faces&fit=crop&w=32&h=32",
                    "medium": "https://images.unsplash.com/profile-1680323081749-eb38590d71f0?ixlib=rb-4.0.3&crop=faces&fit=crop&w=64&h=64",
                    "large": "https://images.unsplash.com/profile-1680323081749-eb38590d71f0?ixlib=rb-4.0.3&crop=faces&fit=crop&w=128&h=128"
                },
                "instagram_username": "zhangkaiyv",
                "total_collections": 0,
                "total_likes": 94,
                "total_photos": 1062,
                "total_promoted_photos": 141,
                "total_illustrations": 0,
                "total_promoted_illustrations": 0,
                "accepted_tos": true,
                "for_hire": true,
                "social": {
                    "instagram_username": "zhangkaiyv",
                    "portfolio_url": null,
                    "twitter_username": "zhangkaiyv",
                    "paypal_email": null
                }
            }
        }
  ]
}
```

---

### ğŸ“¦ TrÆ°á»ng quan trá»ng trong `results[]`

| TrÆ°á»ng | Ã nghÄ©a |
|--------|--------|
| `id` | ID duy nháº¥t cá»§a áº£nh |
| `slug` | Chuá»—i Ä‘á»‹nh danh cÃ³ thá»ƒ dÃ¹ng cho URL thÃ¢n thiá»‡n |
| `description` | MÃ´ táº£ do ngÆ°á»i upload cung cáº¥p (cÃ³ thá»ƒ lÃ  `null`) |
| `alt_description` | MÃ´ táº£ thay tháº¿ Ä‘á»ƒ hiá»ƒn thá»‹ náº¿u khÃ´ng cÃ³ áº£nh |
| `urls.raw` | áº¢nh gá»‘c cháº¥t lÆ°á»£ng cao, chÆ°a qua xá»­ lÃ½ |
| `urls.full` | áº¢nh Ä‘áº§y Ä‘á»§, cháº¥t lÆ°á»£ng cao (cÃ³ crop) |
| `urls.regular` | áº¢nh cháº¥t lÆ°á»£ng tá»‘t (1080w) phÃ¹ há»£p Ä‘á»ƒ hiá»ƒn thá»‹ máº·c Ä‘á»‹nh |
| `urls.small` | áº¢nh nhá» (400w), phÃ¹ há»£p vá»›i card nhá» |
| `urls.thumb` | áº¢nh thumbnail (200w), dÃ¹ng trong preview hoáº·c danh sÃ¡ch |
| `user.name` | TÃªn ngÆ°á»i chá»¥p áº£nh |
| `user.links.html` | Link tá»›i trang cÃ¡ nhÃ¢n cá»§a tÃ¡c giáº£ |
| `likes` | Sá»‘ lÆ°á»£t thÃ­ch |
| `created_at` | NgÃ y Ä‘Äƒng áº£nh |
| `links.download` | Link táº£i áº£nh theo Ä‘iá»u kiá»‡n attribution |
| `color` | MÃ u chá»§ Ä‘áº¡o cá»§a áº£nh (hex code, cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ lÃ m ná»n) |


### âœ… LÆ°u Ã½ khi dÃ¹ng

- **Báº¯t buá»™c pháº£i cÃ³ `client_id`** (Access Key). ÄÄƒng kÃ½ á»Ÿ [developer portal](https://unsplash.com/developers).
- TuÃ¢n thá»§ [guidelines vá» attribution](https://help.unsplash.com/en/articles/2511245-unsplash-api-guidelines), vÃ­ dá»¥ ghi rÃµ tÃªn tÃ¡c giáº£ náº¿u hiá»ƒn thá»‹ áº£nh.
- Unsplash giá»›i háº¡n khoáº£ng **50 requests/giá»** á»Ÿ free tier.

---


## 3.Tá»•ng quan search image api

import {ImageWorkFlow} from "@site/src/components/docs/image-search.tsx";

<ImageWorkFlow />




Ã½ tÆ°á»Ÿng cá»§a search image api lÃ  táº­n dá»¥ng cÃ¡c Third-party API cÃ³ sáºµn, ngÆ°á»i dÃ¹ng sáº½ search trá»±c tiáº¿p tá»« nhÆ°ng api nÃ y,
nhá»¯ng káº¿t quáº£ sáº½ Ä‘Æ°á»£c lÆ°u láº¡i trong elasticsearch, khi nÃ o dá»¯ liá»‡u Ä‘á»§ nhiá»u vÃ  lá»›n thÃ¬ sáº½ chuyá»ƒn sang dÃ¹ng API cá»§a á»©ng dá»¥ng cung cáº¥p.